<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Local Development Arch Linux - UNIT3D Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">UNIT3D Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="unit3d-development-on-arch-linux-with-laravel-sail"><a class="header" href="#unit3d-development-on-arch-linux-with-laravel-sail">UNIT3D development on Arch Linux with Laravel Sail</a></h1>
<!-- cspell:ignore dockerized,pacman -->
<p><em>A guide by EkoNesLeg</em></p>
<p>This guide outlines the steps to set up UNIT3D using Laravel Sail on Arch Linux. While the guide highlights the use of Arch Linux, the instructions can be adapted to other environments.</p>
<blockquote>
<p>[!IMPORTANT]
This guide is intended for local development environments only and is not suitable for production deployment.</p>
</blockquote>
<h2 id="modifying-env-and-secure-headers-for-non-https-instances"><a class="header" href="#modifying-env-and-secure-headers-for-non-https-instances">Modifying <code>.env</code> and secure headers for non-HTTPS instances</a></h2>
<p>For local development, HTTP is commonly used instead of HTTPS. To prevent mixed content issues, adjust your <code>.env</code> file as follows:</p>
<ol>
<li><strong>Modify the <code>.env</code> Config:</strong>
<ul>
<li>
<p>Open your <code>.env</code> file in the root directory of your UNIT3D project.</p>
</li>
<li>
<p>Add or modify the following environment variables:</p>
<pre><code class="language-dotenv">DB_HOST=mysql               # Match the container name in the compose file
DB_USERNAME=unit3d          # The username can be anything except `root`
SESSION_SECURE_COOKIE=false # Disables secure cookies
REDIS_HOST=redis            # Match the container name in the compose file
CSP_ENABLED=false           # Disables Content Security Policy
HSTS_ENABLED=false          # Disables Strict Transport Security
</code></pre>
</li>
</ul>
</li>
</ol>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Ensure Docker and Docker Compose are installed, as they are required for managing the Dockerized development environment provided by Laravel Sail.</p>
<h3 id="installing-docker-and-docker-compose"><a class="header" href="#installing-docker-and-docker-compose">Installing Docker and Docker Compose</a></h3>
<p>Refer to the <a href="https://wiki.archlinux.org/title/Docker">Arch Linux Docker documentation</a> and install the necessary packages:</p>
<pre><code class="language-sh">sudo pacman -S docker docker-compose
</code></pre>
<h2 id="step-1-clone-the-repository"><a class="header" href="#step-1-clone-the-repository">Step 1: clone the repository</a></h2>
<p>Clone the UNIT3D repository to your local environment:</p>
<ol>
<li>
<p>Navigate to your chosen workspace directory:</p>
<pre><code class="language-sh">cd ~/PhpstormProjects
</code></pre>
</li>
<li>
<p>Clone the repository:</p>
<pre><code class="language-sh">git clone git@github.com:HDInnovations/UNIT3D-Community-Edition.git
</code></pre>
</li>
</ol>
<h2 id="step-2-composer-dependency-installation"><a class="header" href="#step-2-composer-dependency-installation">Step 2: Composer dependency installation</a></h2>
<ol>
<li>
<p><strong>Change to the project’s root directory:</strong></p>
<pre><code class="language-sh">cd ~/PhpstormProjects/UNIT3D-Community-Edition
</code></pre>
</li>
<li>
<p><strong>Install Composer dependencies:</strong></p>
<p>Run the following command to install the PHP dependencies:</p>
<pre><code class="language-sh">composer install
</code></pre>
</li>
</ol>
<h2 id="step-3-docker-environment-initialization"><a class="header" href="#step-3-docker-environment-initialization">Step 3: Docker environment initialization</a></h2>
<ol>
<li>
<p><strong>Switch to branch <code>development</code>:</strong></p>
<p>Before starting Docker, switch to the <code>development</code> branch:</p>
<pre><code class="language-sh">git checkout development
</code></pre>
</li>
<li>
<p><strong>Start the Docker environment using Laravel Sail:</strong></p>
<pre><code class="language-sh">./vendor/bin/sail up -d
</code></pre>
</li>
</ol>
<h2 id="step-4-app-key-generation"><a class="header" href="#step-4-app-key-generation">Step 4: app key generation</a></h2>
<p>Generate a new <code>APP_KEY</code> in the <code>.env</code> file for encryption:</p>
<pre><code class="language-bash">./vendor/bin/sail artisan key:generate
</code></pre>
<p><strong>Note</strong>: If you are importing a database backup, make sure to set the <code>APP_KEY</code> in the <code>.env</code> file to match the key used when the backup was created.</p>
<h2 id="step-5-database-migrations-and-seeders"><a class="header" href="#step-5-database-migrations-and-seeders">Step 5: database migrations and seeders</a></h2>
<p>Initialize your database with sample data by running migrations and seeders:</p>
<pre><code class="language-bash">./vendor/bin/sail artisan migrate:fresh --seed
</code></pre>
<blockquote>
<p>[!IMPORTANT]
This operation resets your database and seeds it with default data. Avoid running this in a production environment.</p>
</blockquote>
<h2 id="step-6-database-preparation"><a class="header" href="#step-6-database-preparation">Step 6: database preparation</a></h2>
<h3 id="initial-database-loading"><a class="header" href="#initial-database-loading">Initial database loading</a></h3>
<p>Prepare your database with the initial schema and data. Make sure you have a database dump file, such as <code>prod-site-backup.sql</code>.</p>
<h3 id="mysql-data-importation"><a class="header" href="#mysql-data-importation">MySQL data importation</a></h3>
<p>Import your database dump into MySQL within the Docker environment:</p>
<pre><code class="language-bash">./vendor/bin/sail mysql -u root -p unit3d &lt; prod-site-backup.sql
</code></pre>
<p><strong>Note</strong>: Ensure that the <code>APP_KEY</code> in the <code>.env</code> file matches the key used in your deployment environment for compatibility.</p>
<h2 id="step-7-npm-dependency-management"><a class="header" href="#step-7-npm-dependency-management">Step 7: NPM dependency management</a></h2>
<p>Manage Node.js dependencies and compile assets within the Docker environment:</p>
<pre><code class="language-bash">./vendor/bin/sail bun install
./vendor/bin/sail bun run build
</code></pre>
<p>If needed, refresh the Node.js environment:</p>
<pre><code class="language-bash">./vendor/bin/sail rm -rf node_modules &amp;&amp; bun pm cache rm &amp;&amp; bun install &amp;&amp; bun run build
</code></pre>
<h2 id="step-8-application-cache-configuration"><a class="header" href="#step-8-application-cache-configuration">Step 8: application cache configuration</a></h2>
<p>Optimize the application's performance by setting up the cache:</p>
<pre><code class="language-bash">./vendor/bin/sail artisan set:all_cache
</code></pre>
<h2 id="step-9-environment-restart"><a class="header" href="#step-9-environment-restart">Step 9: environment restart</a></h2>
<p>Apply new configurations or restart the environment by toggling the Docker environment:</p>
<pre><code class="language-bash">./vendor/bin/sail restart &amp;&amp; ./vendor/bin/sail artisan queue:restart
</code></pre>
<h2 id="additional-notes"><a class="header" href="#additional-notes">Additional notes</a></h2>
<ul>
<li><strong>Permissions</strong>: Use <code>sudo</code> cautiously to avoid permission conflicts, particularly with Docker commands that require elevated access.</li>
</ul>
<h3 id="appendix-sail-commands-for-unit3d"><a class="header" href="#appendix-sail-commands-for-unit3d">Appendix: Sail commands for UNIT3D</a></h3>
<p>This section provides a reference for managing and interacting with UNIT3D using Laravel Sail.</p>
<h4 id="docker-management"><a class="header" href="#docker-management">Docker management</a></h4>
<ul>
<li>
<p><strong>Start environment</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail up -d
</code></pre>
<p>Starts Docker containers in detached mode.</p>
</li>
<li>
<p><strong>Stop environment</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail down
</code></pre>
<p>Stops and removes Docker containers.</p>
</li>
<li>
<p><strong>Restart environment</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail restart
</code></pre>
<p>Applies changes by restarting the Docker environment.</p>
</li>
</ul>
<h4 id="dependency-management"><a class="header" href="#dependency-management">Dependency management</a></h4>
<ul>
<li>
<p><strong>Install Composer dependencies</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail composer install
</code></pre>
<p>Installs PHP dependencies defined in <code>composer.json</code>.</p>
</li>
<li>
<p><strong>Update Composer dependencies</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail composer update
</code></pre>
<p>Updates PHP dependencies defined in <code>composer.json</code>.</p>
</li>
</ul>
<h4 id="laravel-artisan"><a class="header" href="#laravel-artisan">Laravel Artisan</a></h4>
<ul>
<li>
<p><strong>Run migrations</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail artisan migrate
</code></pre>
<p>Executes database migrations.</p>
</li>
<li>
<p><strong>Seed database</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail artisan db:seed
</code></pre>
<p>Seeds the database with predefined data.</p>
</li>
<li>
<p><strong>Refresh database</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail artisan migrate:fresh --seed
</code></pre>
<p>Resets and seeds the database.</p>
</li>
<li>
<p><strong>Cache configurations</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail artisan set:all_cache
</code></pre>
<p>Clears and caches configurations for performance.</p>
</li>
</ul>
<h4 id="npm-and-assets"><a class="header" href="#npm-and-assets">NPM and assets</a></h4>
<ul>
<li>
<p><strong>Install NPM dependencies</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail bun install
</code></pre>
<p>Installs Node.js dependencies.</p>
</li>
<li>
<p><strong>Compile assets</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail bun run build
</code></pre>
<p>Compiles CSS and JavaScript assets.</p>
</li>
</ul>
<h4 id="database-operations"><a class="header" href="#database-operations">Database operations</a></h4>
<ul>
<li><strong>MySQL interaction</strong>:
<pre><code class="language-bash">./vendor/bin/sail mysql -u root -p
</code></pre>
Opens MySQL CLI for database interaction.</li>
</ul>
<h4 id="queue-management"><a class="header" href="#queue-management">Queue management</a></h4>
<ul>
<li><strong>Restart queue workers</strong>:
<pre><code class="language-bash">./vendor/bin/sail artisan queue:restart
</code></pre>
Restarts queue workers after changes.</li>
</ul>
<h4 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h4>
<ul>
<li>
<p><strong>View logs</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail logs
</code></pre>
<p>Displays Docker container logs.</p>
</li>
<li>
<p><strong>Run PHPUnit (PEST) tests</strong>:</p>
<pre><code class="language-bash">./vendor/bin/sail artisan test
</code></pre>
<p>Runs PEST tests for the application.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="basic_tuning.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="local_development_macos.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="basic_tuning.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="local_development_macos.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
